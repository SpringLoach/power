## 表结构

数据表是由表名、表中的字段和表的记录三个部分组成的。设计数据表结构就是定义数据表文件名，确定数据表包含哪些字段，各字段的字段名、字段类型、及宽度，并将这些数据输入到计算机当中。表的结构：

| --       | --                                                           |
| -------- | ------------------------------------------------------------ |
| 表名     | 要确保其唯一性。要与用途相符，简略、直观、见名知意。         |
| 字段名称 | 小于64个字符。可以包括字母、汉字、数字、空格和其他字符，不可以包括 `。`、`!`、`[]` 和 `、` 。字段名不可以以先导空格开头。 |
| 字段类型 | 数据类型                                                     |
| 字段属性 | 如字段大小、格式、默认值、必填字段、有效性规则、有效性文本和索引等 |
| 主键     | 能识别记录的**唯一性**关键字段                               |

> 外键必须是外表的**主键**。主要目的是控制存储在外键表中的数据， 使两张表形成关联。



![表结构](D:\娱乐休闲\Wechat\Wechat文件管理\WeChat Files\wxid_sa4inldgv2gj22\FileStorage\File\2021-11\img\表结构.jpg)



### MySQL数据库字段数据类型

> 从大类上分，可以分为：日期和时间、数值，以及字符串。



#### 日期和时间数据类型

| MySQL数据类型 | 含义                                       | 格式                |
| ------------- | ------------------------------------------ | ------------------- |
| date          | 3字节，日期，格式：2014-09-18              | YYYY-MM-DD          |
| time          | 3字节，时间，格式：08:42:30                | HH:MM:SS            |
| datetime      | 8字节，日期时间，格式：2014-09-18 08:42:30 | YYYY-MM-DD HH:MM:SS |
| timestamp     | 4字节，自动存储记录修改的时间              | YYYYMMDD HHMMSS     |
| year          | 1字节，年份                                | YYYY                |

#### 数值数据类型

**整型**

| MySQL数据类型 | 含义（有符号）                        |
| ------------- | ------------------------------------- |
| tinyint       | 1字节，范围（-128~127）               |
| smallint      | 2字节，范围（-32768~32767）           |
| mediumint     | 3字节，范围（-8388608~8388607）       |
| int           | 4字节，范围（-2147483648~2147483647） |
| bigint        | 8字节，范围（+-9.22*10的18次方）      |

上面定义的都是有符号的，当然了，也可以加上unsigned关键字，定义成无符号的类型，那么对应的取值范围就要翻翻了，比如：

tinyint unsigned的取值范围为0~255。



**浮点型**

| MySQL数据类型 | 含义                                  |
| ------------- | ------------------------------------- |
| float(m, d)   | 4字节，单精度浮点型，m总个数，d小数位 |
| double(m, d)  | 8字节，双精度浮点型，m总个数，d小数位 |
| decimal(m, d) | decimal是存储为字符串的浮点数         |

在使用浮点型的时候，还是要注意陷阱的，要以插入数据库中的实际结果为准。 建立了一个表如下，有一列为float(5, 3)；做了以下试验：

1. 插入123.45678，最后查询得到的结果为99.999；

2. 插入123.456，最后查询结果为99.999；

3. 插入12.34567，最后查询结果为12.346；



#### 字符串数据类型

| MySQL数据类型 | 含义                                      |
| ------------- | ----------------------------------------- |
| char(n)       | 固定长度，最多255个字符                   |
| varchar(n)    | 可变长度，最多65535个字符                 |
| tinytext      | 可变长度，最多255个字符                   |
| text          | 可变长度，最多65535个字符                 |
| mediumtext    | 可变长度，最多2的24次方-1个字符           |
| longtext      | 可变长度，最多2的32次方-1个字符           |
| tinyblob      | 二进制形式的短文本数据，最多255个字符     |
| blob          | 二进制形式的较长文本数据，最多65535个字符 |

1. char（n）和varchar（n）中括号中n代表**字符的个数**，并不代表字节个数，所以当使用了中文的时候(UTF8)意味着可以插入m个中文，但是实际会占用m*3个字节。

2. char和varchar最大的区别就在于char不管实际value是什么都会占用n个字符的空间，而varchar只会占用实际字符应该占用的空间+1，并且实际空间+1<=n。

3. 超过char和varchar的n设置后，字符串会被截断。

4. char在存储的时候会截断尾部的空格，varchar和text不会。

5. varchar会使用1-3个字节来存储长度，text不会。



#### 其它类型

1.enum(“member1″, “member2″, … “member65535″)

enum数据类型就是定义了一种枚举，最多包含65535个不同的成员。当定义了一个enum的列时，该列的值限制为列定义中声明的值。如果列声明包含NULL属性，则NULL将被认为是一个有效值，并且是默认值。如果声明了NOT NULL，则列表的第一个成员是默认值。

2.set(“member”, “member2″, … “member64″)

set数据类型为指定一组预定义值中的零个或多个值提供了一种方法，这组值最多包括64个成员。值的选择限制为列定义中声明的值。



### MySQL数据类型[常用属性](https://www.cnblogs.com/cqlb/p/9856841.html)

| 属性               | 说明                                                         |
| ------------------ | ------------------------------------------------------------ |
| **auto_increment** | 能为新插入的行赋一个唯一的整数标识符。为列赋此属性将为每个新插入的行赋值为上一次插入的ID+1 |
|                    | MySQL要求将auto_increment属性用于作为主键的列。此外，每个表只允许有一个auto_increment列 |
| **binary**         | 只用于char和varchar值。当为列指定了该属性时，将以区分大小写的方式排序；忽略binary属性时，将使用不区分大小写的方式排序 |
| **default**        | 在没有任何值可用的情况下，赋予某个**常量**值                 |
|                    | 无法用于BLOB或TEXT列。如果已经为此列指定了NULL属性，没有指定默认值时默认值将为NULL，否则默认值将依赖于字段的数据类型 |
| **index**          | 用于加速数据库查询，索引一个列会为该列创建一个有序的键数组，每个键指向其相应的表行 |
|                    | 以后针对输入条件可以搜索这个有序的键数组                     |
| **not null**       | 如果将一个列定义为not null，将不允许向该列插入null值         |
| **null**           | 为列指定该属性时，该列可以保持为空，而不论行中其它列是否已经被填充。（不是空字符串或0） |
| **primary key**    | 用于确保指定行的唯一性。指定为主键的列中，值不能重复，也不能为空。 |
|                    | 当输入到数据库中的每行都已经有不可修改的唯一标识符，一般会使用单字段主键，否则可以使用多字段主键 |
| **unique**         | 被赋予该属性的列将确保所有值都有不同的值，只是null值可以重复 |
| **zerofill**       | 可用于任何数值类型，用0填充所有剩余字段空间                  |

