# --常用规范--

| --                                                     | --                                                           |
| ------------------------------------------------------ | ------------------------------------------------------------ |
| 重点                                                   | :star2:                                                      |
| 不确定                                                 | :question:                                                   |
| 次重点                                                 | :flipper:                                                    |
|                                                        | :heavy_check_mark: ​  :heavy_multiplication_x:                |
| 拓展、demo                                             | :whale:                                                      |
| 密切相关补充                                           | :ghost:                                                      |
| 存在联系补充                                           | :turtle:                                                     |
| bug                                                    | :octopus:                                                    |
| 规范                                                   | :hammer_and_wrench:                                          |
| 温故                                                   | :european_castle:                                            |
| 联系上文                                               | :trident:                                                    |
| 联系下文                                               | :point_down:                                                 |
| `<span style="backGround: pink"></span>`               | <span style="backGround: pink">特别注意</span>               |
| `<span style="color: slategray"></span>`               | <span style="color: slategray">一般</span>                   |
| `<span style="color: #a50"></span>`                    | <span style="color: #a50">概念化</span>                      |
| `<span style="color: green"></span>`                   | <span style="color: green">特别注意</span>                   |
| `<span style="color: #ed5a65"></span>`                 | <span style="color: #ed5a65">名词解释</span>                 |
| `<span style="color: #ff0000"></span>`                 | <span style="color: #ff0000">重点</span>                     |
| `<span style="color: #f7534f;font-weight:600"></span>` | <span style="color: #f7534f;font-weight:600">名词解释</span> |
| `<span style="backGround: #efe0b9"></span>`            | <span style="backGround: #efe0b9">文件名</span>              |

# ----



## 下次一定

### RegExp.$1

https://blog.csdn.net/qq_42423964/article/details/102385983

D:\项目相关\uni-app\万宁微商城\manning-cloud-store-app4\src\lib/date.util.js



### async await 

```javascript
async serviceBookPage() {
  console.log('serviceBookPage 1')
  const r = await serviceBookPage(this.data.queryData)
  console.log('serviceBookPage 2')
  // ...大量代码
  console.log('serviceBookPage 3')
},

async onShow() {
  const res = await this.serviceBookPage()
  console.log('res', res)
  console.log('onshow Next')
},
```

执行顺序

```elm
serviceBookPage 1
serviceBookPage 2
serviceBookPage 3
res undefined
onshow Next
```



### vue项目打包优化之-productionSourceMap设置

https://blog.csdn.net/weixin_44217741/article/details/108317371



### vue3

#### Tree shaking

> https://blog.csdn.net/thewar196/article/details/122455623



#### 其它特性

vue3 发布之后，性能增强，速度vue2的倍数，打包体积都在减小（treeshaking），composition api 增加了项目可读性。



### 获取目标元素的标志属性

```react
<div class="left-cate-wrap" ref="demo">
  <div class="cate-item" v-for="(item, index) in jobList" :key="item.id" :data-index="index">
    <div class="cate-title" :data-index="index">{{item.name}}</div>
    <i class="el-icon-arrow-right" :data-index="index" />
  </div>
</div>

methods: {
  handleMouseMove(e) {
    console.log(e.target.dataset.index)
  },
},
mounted()  {
  this.$refs.demo.addEventListener("mousemove", this.handleMouseMove)
},
```



### vue3 路由配置

> 有路由中导出值的中文介绍

https://blog.csdn.net/jason_renyu/article/details/123261823



### pinia较好介绍 

https://blog.csdn.net/weCat_s/article/details/122131245



### ts Record

https://blog.csdn.net/z591102/article/details/109809350



### Teleport

> 子组件添加到文档的指定位置，方便控制布局。仍能与父组件正常通信。

https://www.javascriptc.com/vue3js/guide/teleport.html#%E4%B8%8E-vue-components-%E4%B8%80%E8%B5%B7%E4%BD%BF%E7%94%A8



### webpack

#### 移除preload和prefetch

> 优化首屏加载、清除 console.log、开启 gzip 压缩、压缩图片

https://blog.csdn.net/qq_39025670/article/details/110951945



### webpack5

https://juejin.cn/post/7023242274876162084#heading-17



### 路由base

https://www.jianshu.com/p/53f59028350e

https://blog.csdn.net/weixin_62277266/article/details/123047185



### eslint

https://juejin.cn/post/6844903608379506701



### vue实现功能-从编辑页返回列表页保留查询条件

从编辑页返回列表页保留查询条件

1. 跳转到编辑页时，将查询条件保存到路由参数中
2. 从编辑页点击返回时，将路由参数带上，跳转到列表页
3. 在列表页组件的 mounted 钩子中，检查路由是否存在相应参数，有就初始化查询条件



### Expected linebreaks to be 'LF' but found 'CRLF'

https://www.jianshu.com/p/efe9c8aca7fa?utm_campaign=maleskine&utm_content=note&utm_medium=seo_notes

https://www.cnblogs.com/yoyotl/p/12127570.html



### h5在ios的分享

正常的路由跳转方式，对于安卓来说，其 url 可以直接用于 wx.config 配置

但 ios 不可以，对于需要分享的页面，需要通过 location.href / location.replace 的方式来到



对于分享给好友/分享到朋友圈，需要使用旧的 API

因为在 ios 使用新的 API 时，会出现各种奇怪的配置报错



每个需要分享的页面都需要先使用 wx.config 配置，然后在 wx.ready 中初始化相关配置

配置路径的处理：1. 要取需要的部分；2.路径中文编码的问题，需要后端配合

```
const currentLink = window.location.href.split("#")[0]; // 注意：当前网页的 URL，不包含#及其后面的部分
const { data, err } = await api.getWechatShareConfigs({
  url: encodeURIComponent(currentLink),
});
```



### 常见bug产生原因

| --                 | --                         |
| ------------------ | -------------------------- |
| 脏数据，奇怪的数据 | 前端未做点击限制，重复点击 |



### delete的奇怪现象

```javascript
// 从路由中删除这些参数，避免分享时分享出去
if (route.query.openId) {
  // delete route.query.nickName; // XXX代表要删除的参数（即url参数key）
  // delete route.query.headImgUrl;
  // delete route.query.openId;
  const r: any = {}
  for (const key in route.query) {
    if (['nickName', 'headImgUrl', 'openId'].includes(key) === false) {
      r[key] = route.query[key]
    }
  }
  router.push({query: r})
}
```

如果直接使用 delete 关键字，会导致跳转后的路由参数中仍有被删除的参数





### 每次路由跳转的时候滚动到顶部

```javascript
const router = createRouter({
  history: createWebHashHistory(),
  routes,
  // 每次路由跳转的时候滚动到顶部
  scrollBehavior(to, from, savedPosition) {
    return { top: 0 };
  },
});
```

> 在 H5 页面中明显有效。



### web点击下载图片

点击链接下载图片

```vue
<a-button type="primary">
  <a download="qrcode.png" @click='download' id="download">下载</a>
</a-button>

<script>
const download = function () {
  let canvas = document.getElementsByTagName('canvas')[0]
  document.getElementById('download').setAttribute('href', canvas.toDataURL())
}
</script>
```

点击非链接下载图片

```javascript
handleOks() {
  let src = this.$refs["qrcodeImage"].dataUrl;
  let a = document.createElement("a");
  a.href = src;
  a.download = "qrcode.png";
  a.click();
}
```









