### 保留查询参数发起请求

| --   | 情景说明                                                     |
| ---- | ------------------------------------------------------------ |
|      | 该项目使用 vueX 接管请求，使用 `queryForm` 的状态保存查询条件 |
|      | 有专门的搜索框：在搜索时设置 `queryForm`，重置时设置 `queryForm` |
|      | 弹框/子组件进行某些操作后，需要更新父页面的列表              |
|      | 就可以将 `queryForm` 一并传入，在主页面的接口进行条件判断    |



```react
/* xx.vue */
this.handleSplitDelivery({ orderNo: this.record.orderNo }, this.orderListState.queryForm);

/* commom.js */
/* 弹窗的某个功能，操作后会影响主页面的列表数据，故需重新请求 */
handleSplitDelivery(form, qF) {
  splitDelivery(form).then(() => {
    ...
    this.loadList(qF);
  });
},
/* 主页面的列表数据 */
loadList(queryForm) {
  this.setLoading(true);
  if (!queryForm || queryForm == null) {
    queryForm = {
      pageNum: 1,
      pageSize: 10,
    };
  }
  page(queryForm).then((r) => {
    ...
  });
},
```



### 页面组件（弹窗）需被其他页面复用

> 由 VueX 控制的方式改写成 子组件 形式。



### 切换分支并拉取后莫名报错找不到文件

> 重新运行项目



### 动态化后由于接口字段不完整报错

```react
<span>{{ data.form.name }}</span>

/* 接口实际返回 */
console.log(data);         // { form: null }
```



```javascript
/* 解决激活情况下的报错 */
data.form = data.form?data.form||{};

/* 解决 visibility：hidden 时的报错 */
/* 初始值的定义形式 */
data: {
  form: {},
}
```



### 接口400

> 即找不到接口，一般是传参方式错了，如 `params` 和 `data` 用混淆了，或参数的键名错误/值类型错误。



### 接口不存在的单号/单号状态错误等

> 有可能是脏数据、旧数据。



### 新增/编辑弹窗

**在页面点击新增**

​    设置状态 currentForm 为 `{}`，打开弹窗

**在页面点击某列表项得编辑**

​    设置状态 currentForm 为对应的列表项数据，适用于数据够用，不需重新请求的情况，效率更高

**在弹窗页面展示/绑定**

​    由于某些值需要格式化后绑定，需要根据状态 currentForm 创建本地 form，用于处理后绑定

​    疑问：状态为对象，是否能直接改变其属性而不需要触发 mutation

**关闭弹窗页面**

​    只需关闭弹窗



