## job项目

`webpack.config.js`

```javascript
const resolve = require('path').resolve;
const webpack = require('webpack');
const HtmlWebpackPlugin = require('html-webpack-plugin');
const HtmlWebpackTagsPlugin = require('html-webpack-tags-plugin');
const CopyPlugin = require("copy-webpack-plugin");
const VueLoaderPlugin = require('vue-loader/lib/plugin');
const url = require('url');
const publicPath = '/';

module.exports = (options = {}) => ({
  entry: {
    vendor: './src/vendor',
    app: ["babel-polyfill", './src/main.js']
  },
  output: {
    path: resolve(__dirname, 'dist'),
    filename: options.dev ? '[name].js' : '[name].js?[chunkhash]',
    chunkFilename: '[id].js?[chunkhash]',
    publicPath: options.dev ? '/assets/' : publicPath
  },
  module: {
    rules: [{
        test: /\.vue$/,
        use: ['vue-loader']
      },
      {
        test: /\.js$/,
        loader: 'babel-loader',
        options: {
          presets: ['es2015']
        },
        include: [resolve('src')]
      },
      {
        test: /\.css$/,
        use: ['style-loader', 'css-loader']
      },
      {//加载图片loader配置
        test: /\.(png|jpg|gif)$/,
          use: [
          {
            loader: 'url-loader',
            options: {
              name: '[path][name].[ext]',
              esModule:false,
              limit: 8192 //大小限制
            }
          }
        ]
      },
      {//加载字体等loader配置
        test: /\.(eot|svg|ttf|woff|woff2)(\?\S*)?$/,
        use:{
          loader: 'url-loader'
        }
      },
      {
        test: /\.less$/,
        loader: "style-loader!css-loader!less-loader"
      }
    ]
  },
  stats: { children: false },
  plugins: [
    new CopyPlugin({
      patterns: [{ from: resolve(__dirname, './src/assets/juniper_mod.min.js')}]
    }),
    new VueLoaderPlugin(),
    new HtmlWebpackPlugin({
      template: 'src/index.html',
      // 配置favicon
      favicon: resolve('src/static/favicon.ico')
    }),
    new HtmlWebpackTagsPlugin({ 
      tags: ['juniper_mod.min.js'],
      append: false,
    }),
    new webpack.ProvidePlugin({
      jQuery:'jquery',
      $:'jquery'
    })
  ],
  optimization: {
    splitChunks: {
      // include all types of chunks
      chunks: 'all'
    }
  },
  resolve: {
    alias: { //本置别名，这样子可以通过~来定位根目录
      '~': resolve(__dirname, 'src'),
      'wangeditor':resolve(__dirname,'node_modules/fstar-wangeditor')
    },
    extensions: ['.js', '.vue', '.json', '.css']
  },
  devServer: {
    host: '127.0.0.1',
    port: 8888,
    disableHostCheck: true,
    proxy: {
      '/api/kernels': {
        target: 'http://1.15.153.37:31639', // 测试环境域名
        changeOrigin: true,
        // pathRewrite: {
        //   '^/kernels': '/'
        // }
        ws: true,
      },
      '/api/': {
        target: 'http://127.0.0.1',
        changeOrigin: true,
        pathRewrite: {
          '^/api': ''
        }
      },
    },
    historyApiFallback: {
      index: url.parse(options.dev ? '/assets/' : publicPath).pathname
    }
  },

  performance: {
      hints: "warning", // 枚举
      maxAssetSize: 30000000, // 整数类型（以字节为单位）
      maxEntrypointSize: 50000000, // 整数类型（以字节为单位）
      assetFilter: function(assetFilename) {
      // 提供资源文件名的断言函数
      return assetFilename.endsWith('.css') || assetFilename.endsWith('.js');

      }
  },
  devtool: options.dev ? '#eval-source-map' : '#source-map'
})
```



### babel-polyfill的使用

用途

由于ie9和一些低版本的高级浏览器对es6新语法并不支持，导致项目在这些浏览器中不能显示页面。

该插件能够添加相应方法，让这些浏览器支持原生情况下不能支持的代码。



安装

```elm
npm install --save-dev babel-polyfill
```



引用

> `module.exports.entry` 的数组语法：添加互不依赖的多个文件到一个 `chunk` ，即根据多个主入口将它们的依赖导向到一个 `chunk`。

```javascript
/* A webpack.config.vue */
module.exports = {
　　entry: ["babel-polyfill", './src/main.js']
};

/* B 脚本头部 */
require("babel-polyfill");

/* C 脚本头部 */
import "babel-polyfill";
```



### entry

#### 分离应用程序和第三方库入口

> 从 `app.js` 和 `vendors.js` 开始创建依赖图。此设置允许使用 `CommonsChunkPlugin` 从 `app bundle` 中提取 vendor （不会变动的代码），引用到 `vendors bundle`，以实现长效缓存。

```javascript
const config = {
  entry: {
    app: './src/app.js',
    vendors: './src/vendors.js'
  }
};
```

`vender.js`


```javascript
import Vue from 'vue'
import ElementUI from 'element-ui'
```



### output

项 | 说明 | 补充
:- | :- | :-
path | 输出文件所在的绝对路径 | 第二个参数将作为输出的新建文件夹 
filename | 用于输出文件的文件名 | [name]推测指向 entry 模块的键 
publicPath | 将静态资源打包到该相对路径下 | 将拼接到静态资源前 
chunkFilename | 文件被输出后的文件名 | /

```javascript
  output: {
    path: resolve(__dirname, 'dist'),
    filename: options.dev ? '[name].js' : '[name].js?[chunkhash]',
    chunkFilename: '[id].js?[chunkhash]',
    publicPath: options.dev ? '/assets/' : publicPath
  },
```
属性 | 解释 
:- | :- 
__dirname | 获取当前文件的完整绝对路径 
chunkhash | 哈希值。公共库的代码无改动时，不变化







