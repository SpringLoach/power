#### 辅助文档—获取页面链接

> 情景：点击热区，有可能跳转到多种不同的页面，可以根据接口信息，经过映射得到具体页面路径，并从信息中获取到跳转参数。
>
> 优势：使页面组件变得简洁，而无需关心内部逻辑的具体实现。

`link.js`

```javascript
// 常用入口下的链接类型
const TYPE = {
  COMMON_ENTRANCE: 1, //常用入口
  SHOP_ITEM: 2, // 商品
  FLASH: 3, // 秒杀
}

// 常用入口下的链接类型
const MODE = {
  HOME: 1, // 首页
  CART: 2, // 购物车
  CATEGORY: 3, // 商品分类
}

const getUrlByMode = (mode) => {
  switch (mode) {
    case MODE.HOME:
      return '/pages/home/index'
    case MODE.CART:
      return '/pages/cart/index'
    case MODE.CATEGORY:
      return '/pages/store/index'
  }
}

const getUrl = (link, storeCode) => {
  switch (link.type) {
    case TYPE.COMMON_ENTRANCE:
      return getUrlByMode(link.mode)  // 该值对应多种可能性，根据另一属性判断具体页面
    case TYPE.FLASH:
      return `/pages/seckill/activityHall/activityHall?activityId=${link.id}`
    case TYPE.PAGE:
      return `/pages/customPage/index?id=${link.id}`
    default:
      return ''
  }
}

export default function toLink(link, storeCode) {
  if (link && link.type) {
    if (link.type === TYPE.MINI_PATH) {
      // 打开另一个小程序
      uni.navigateToMiniProgram({
        appId: link.appId,
        path: link.path
      })
    } else {
      // 根据信息获取完整链接
      const url = getUrl(link, storeCode)
      uni.navigateTo({
        url
      })
    }
  }
}
```

`Swiper.vue`

```less
import toLink from '@/pages/xx/common/link'

// 提供 code 是因为某种类型的链接需要用到
doToLink(link) {
  toLink(link, this.storeInfo.code)
}
```



