### 去掉小数末位多余的零

```javascript
/**
 * @description:  去掉double类型小数点后面多余的0
 * @param {*} num (要处理的字符串或double)
 * @return {*} num (没有多余零的小数或字符串)
 */
function handleCutZero(num) {
  let newstr = num
  // 小数部分长度
  let leng = num.length - num.indexOf('.') - 1
  // 判断是否需要处理（是否为小数）
  if (num.indexOf('.') > -1) {
    // 循环小数部分
    for (let i = leng; i > 0; i--) {
      // 如果处理的对象末尾有0
      if (newstr.lastIndexOf('0') > -1 && newstr.substr(newstr.length - 1, 1) == 0) {
        let k = newstr.lastIndexOf('0')
        // ① 如果小数点后只有一个0，去掉小数点，返回
        if (newstr.charAt(k - 1) == '.') {
          return newstr.substring(0, k - 1)
        } else {
          // ② 否则去掉一个0，继续循环
          newstr = newstr.substring(0, k)
        }
      } else {
        //如果末尾没有0
        return newstr
      }
    }
  }
  return num
}

// 例子
handleCutZero(123.000) -> 123
handleCutZero(123.0001) -> 123.0001
handleCutZero(10203000.0101000) -> 10203000.0101
handleCutZero(10203000) -> 10203000
```



### 单位转换

#### 分转元

> 若值入为0或null，则输出值为0.00。若输入值为 undefined，则输出值为NaN。

```react
<span>¥{{ (price / 100).toFixed(2) }}</span>

let a = (2 / 100).toFixed(2)          // 0.02
let b = (1032 / 100).toFixed(2)       // 10.32
let c = (0 / 100).toFixed(2)          // 0.00
let c = (0.1 / 100).toFixed(2)        // 0.00
let c = (null / 100).toFixed(2)       // 0.00
let c = (undefined / 100).toFixed(2)  // NaN
```

:octopus: 该方案要求被除数为整数类型，否则会导致精度丢失。



### 格式化距离

```javascript
// 传入的数字单位为 km
formatDistanceStr(distance) {
  distance = distance || 0
  if (distance < 0.1) {
    distance = `${Number(distance * 1000).toFixed(0)}m`
  } else if (distance < 0.5) {
    distance = `${Number(distance * 1000).toFixed(0)}m`
  } else {
    distance = `${Number(distance).toFixed(1)}km`
  }
  return distance
},

console.log(this.formatDistanceStr(0.05))  // 50m
console.log(this.formatDistanceStr(0.5))   // 0.5km
console.log(this.formatDistanceStr(5))     // 5.0km
console.log(this.formatDistanceStr(50))    // 50.0km
console.log(this.formatDistanceStr(500))   // 500.0km
```



