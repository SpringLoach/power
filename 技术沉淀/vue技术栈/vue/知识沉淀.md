## 实践出真滋

### 全局注册组件

> 某些组件，如页面头部和页面底部区域，在绝大部分页面都需要用到，就可以考虑注册为全局组件，而不需要逐个导入到需要它们的父组件中。

 `main.js`

```javascript
import pageTop from './components/top.vue';
import pageBottom from './components/bottom.vue';
Vue.component('page-top', pageTop);
Vue.component('page-bottom', pageBottom);
```

### 静态页面推入假数据

> 可以先在 HTML 中动态绑定值，方便后期动态化，即使用接口。

```javascript
data: {
  return {
    recommendList: []
  }  
},
created() {
  for(let i=0; i<7; i++) {
    let cell = {
      name: '前端开发工程师',
      experience: '经验3-5年/本科',
      site: '吴兴区',
      time: '发布时间：2021/09/15',
      salary: '6k-12k'
    }
    /* 可作为key的绑定值或唯一值 */
    cell.id = i;
    this.recommendList.push(cell);
  }
  console.log('-----------------', this.recommendList);
}
```

### 动态绑定—传入数值

> 需要直接传入数值、布尔值这些非字符串类型时，也需要用到 `:`。

```vue
<div :label="3"></div>
```

### 动态类—绑定数组元素

> 由于 Vue 本身的特性，无法直接监听通过下标更改数组元素。

```javascript
data() {
  return {
     activeArr = [false, false, false] 
  }  
},
methods: {
  handleDemo(id) {
    this.activeArr[id] = !this.activeArr[id];
    // 触发监听
    this.activeArr = [...this.activeArr];
  }   
}
```

### 动态类—使用杠类名

> 加上引号类名中就可以带 `-` 了。

```vue
<span :class="{'is-active': isActive}">demo</span>
```



### 阻止冒泡

> 存在一个大的卡片，点击卡片时跳转页面，点击卡片内的按钮时不去跳转，而是执行其他逻辑。

```html
// 如果是子组件，还需要额外的修饰符
<el-checkbox v-model="item.select" class="job" @click.stop.native>{{item.job}}</el-checkbox>

<el-button class="apply" type="primary" size="small" @click.stop>批量申请</el-button>
```

### 占位图片

> 情景：用户未上传头像时的展位图。
>
> 不能直接引用相对路径， 但是用 `require` 模块又不能引用 data 的数据。

```html
<img :src="src === ''?require('../../../assets/demo.png'):src"/>
```

### 表单共用

> 编辑或新增时，表单的所有字段相同，可以打开**同一个**拟态框**组件**。
>
> 虽触发相同事件，但传入不同值区分表单类型。
>
> 由于该页面关联表单太多，为了少写相似的方法，这里还用 `name` 属性判断展示哪一个表单及调用其方法。

```vue
<span @click="handleViewForm('demo', 'new')">新增</span>
<span @click="handleViewForm('demo', 'edit', item.id)">编辑</span>

/* 激活某一表单 */
handleViewForm(name, type, id) {
  let targetView = name + 'View';
  this[targetView] = true;
  this.$refs[name].initForm(type, id);
},
```

`demoForm.vue`

```javascript
initForm(type, id) {
  if(type === 'new') {
    this.title = '添加自我评价'
  } else {
    this.title = '编辑自我评价'
    /* 以id作为参数请求数据 */
  }
},
```

### 模板上的列表循环

>  在 `Vue2` 中，不能直接将 `key` 写在 template 元素上  
>  需要在内部元素中添加不重复的key。

```vue
<template v-for="item in someData">
  <div :key="'top' + item"></div>
  <div :key="'bottom' + item"></div>
</template>
```



## 迷惑行为

### 动态绑定图片路径后不显示
> 审查元素时发现路径未能添加到 `<img>` 的 src 属性上。
>
> 原因是某种情况绑定的值未在 `data` 中事先声明，导致图像元素内部产生错误。

```less
<img :src="form.url == ''?require('../../../static/job/defult.png'):form.url" />

form : {
  url: ''
};
```



## 报错

### Property or method "xx" is not defined

```elm
Property or method "xx" is not defined on the instance but referenced during render. 
```

#### 可能原因

1. 注意子组件的 `props` 选项不要漏掉s。



